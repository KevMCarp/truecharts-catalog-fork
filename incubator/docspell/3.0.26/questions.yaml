groups:
  - name: Container Image
    description: Image to be used for container
  - name: General Settings
    description: General Deployment Settings
  - name: App Configuration
    description: App Specific Config Options
  - name: Networking and Services
    description: Configure Network and Services for Container
  - name: Storage and Persistence
    description: Persist and Share Data that is Separate from the Container
  - name: Ingress
    description: Ingress Configuration
  - name: Security and Permissions
    description: Configure Security Context and Permissions
  - name: Resources and Devices
    description: "Specify Resources/Devices to be Allocated to Workload"
  - name: Middlewares
    description: Traefik Middlewares
  - name: Metrics
    description: Metrics
  - name: VPN
    description: VPN
  - name: Addons
    description: Addon Configuration
  - name: Advanced
    description: Advanced Configuration
  - name: Documentation
    description: Documentation
portals:
  open:
    protocols:
      - "$kubernetes-resource_configmap_portal_protocol"
    host:
      - "$kubernetes-resource_configmap_portal_host"
    ports:
      - "$kubernetes-resource_configmap_portal_port"
questions:
  - variable: global
    label: Global Settings
    group: "General Settings"
    schema:
      type: dict
      hidden: true
      attrs:
        - variable: isSCALE
          label: Flag this is SCALE
          schema:
            type: boolean
            default: true
            hidden: true
  - variable: controller
    group: "General Settings"
    label: ""
    schema:
      additional_attrs: true
      type: dict
      attrs:
        - variable: replicas
          description: Number of desired pod replicas
          label: Desired Replicas
          schema:
            type: int
            required: true
            default: 1
  - variable: customextraargs
    group: "General Settings"
    label: "Extra Args"
    description: "Do not click this unless you know what you are doing"
    schema:
      type: boolean
      default: false
      show_subquestions_if: true
      subquestions:
        - variable: extraArgs
          label: Extra Args
          schema:
            type: list
            default: []
            items:
              - variable: arg
                label: Arg
                schema:
                  type: string
  - variable: dsc
    group: App Configuration
    label: DSC Configuration
    schema:
      additional_attrs: true
      type: dict
      attrs:
        - variable: enabled
          label: Enable DSC (Document Importer)
          description: You need to enable integration endpoint with HTTP header as well in Rest Server configuration
          schema:
            type: boolean
            default: false
            show_subquestions_if: true
            subquestions:
              - variable: imported_action
                label: Action to perform on imported documents
                schema:
                  type: string
                  default: move
                  enum:
                    - value: move
                      description: move
                    - value: delete
                      description: delete
              - variable: not_match_glob
                label: Not match glob pattern
                schema:
                  type: string
                  default: "**/.*"
              - variable: match_glob
                label: Match glob pattern
                schema:
                  type: string
                  default: ""
              - variable: language
                label: Language
                schema:
                  type: string
                  default: ""
              - variable: tag
                label: Tag
                schema:
                  type: string
                  default: ""
  - variable: rest_server
    group: App Configuration
    label: Rest Server Configuration
    schema:
      additional_attrs: true
      type: dict
      attrs:
        - variable: app_name
          label: App Name
          description: App name, shows on the top right corner
          schema:
            type: string
            default: Docspell
        - variable: base_url
          label: Base URL
          description: This is the base URL this application is deployed to.
          schema:
            type: string
            default: ""
        - variable: server_opts
          label: Server Options
          schema:
            additional_attrs: true
            type: dict
            attrs:
              - variable: enable_http2
                label: Enable HTTP2
                schema:
                  type: boolean
                  default: false
              - variable: max_connections
                label: Max Connections
                schema:
                  type: int
                  default: 1024
              - variable: response_timeout
                label: Response Timeout
                schema:
                  type: string
                  default: 45s
        - variable: max_item_page_size
          label: Max Item Page Size
          description: This is a hard limit to restrict the size of a batch that is returned when searching for items.
          schema:
            type: int
            default: 200
        - variable: max_note_length
          label: Max Note Length
          description: The number of characters to return for each item notes when searching.
          schema:
            type: int
            default: 180
        - variable: show_classification_settings
          label: Show Classification Settings
          description: This defines whether the classification form in the collective settings is displayed or not.
          schema:
            type: boolean
            default: true
        - variable: auth
          label: Auth
          schema:
            additional_attrs: true
            type: dict
            attrs:
              - variable: session_valid
                label: Session Valid
                description: How long a authentication token is valid
                schema:
                  type: string
                  default: 5 minutes
              - variable: remember_me
                label: Remember Me
                schema:
                  additional_attrs: true
                  type: dict
                  attrs:
                    - variable: enabled
                      label: Enable Remember Me
                      schema:
                        type: boolean
                        default: true
                    - variable: valid
                      label: Valid
                      description: How long the remember me cookie/token is valid.
                      schema:
                        type: string
                        default: 30 days
        - variable: download_all
          label: Download
          schema:
            additional_attrs: true
            type: dict
            attrs:
              - variable: max_files
                label: Max Files
                description: How many files to allow in a zip
                schema:
                  type: int
                  default: 500
              - variable: max_size
                label: Max Size
                description: The maximum (uncompressed) size of the zip file contents.
                schema:
                  type: string
                  default: 1400M
        - variable: integration_endpoint
          label: Integration Endpoint
          schema:
            additional_attrs: true
            type: dict
            attrs:
              - variable: enabled
                label: Enable Integration Endpoint
                schema:
                  type: boolean
                  default: false
              - variable: priority
                label: Priority
                description: The priority to use when submitting files through this endpoint.
                schema:
                  type: string
                  default: low
                  enum:
                    - value: low
                      description: low
                    - value: high
                      description: high
              - variable: source_name
                label: Source Name
                description: The name used for the item "source" property when uploaded through this endpoint.
                schema:
                  type: string
                  default: integration
              - variable: allowed_ips
                label: Allowed IPS
                schema:
                  additional_attrs: true
                  type: dict
                  attrs:
                    - variable: enabled
                      label: Enable Allowed IPs
                      schema:
                        type: boolean
                        default: false
                    - variable: ips
                      label: IPs
                      schema:
                        type: list
                        # TODO: Check how it's rendered on GUI
                        default: ["127.0.0.1"]
                        items:
                          - variable: ipEntry
                            label: IP Entry
                            schema:
                              type: string
                              required: true
                              default: ""
              - variable: http_basic_auth
                label: HTTP Basic Auth
                schema:
                  additional_attrs: true
                  type: dict
                  attrs:
                    - variable: enabled
                      label: Enable HTTP Basic Auth
                      schema:
                        type: boolean
                        default: false
                    - variable: realm
                      label: Realm
                      schema:
                        type: string
                        default: ""
                    - variable: user
                      label: User
                      schema:
                        type: string
                        default: ""
                    - variable: password
                      label: Password
                      schema:
                        type: string
                        private: true
                        default: ""
              - variable: http_header
                label: HTTP Header
                schema:
                  additional_attrs: true
                  type: dict
                  attrs:
                    - variable: enabled
                      label: Enable HTTP Header
                      schema:
                        type: boolean
                        default: false
                    - variable: header_name
                      label: Header Name
                      schema:
                        type: string
                        default: Docspell-Integration
                    - variable: header_value
                      label: Header Value
                      schema:
                        type: string
                        private: true
                        default: some-secret
        - variable: admin_endpoint
          label: Admin Endpoint
          schema:
            additional_attrs: true
            type: dict
            attrs:
              - variable: secret
                label: Secret
                description: Disables endpoint if empty
                schema:
                  type: string
                  private: true
                  default: ""
        - variable: backend
          label: Backend
          schema:
            additional_attrs: true
            type: dict
            attrs:
              - variable: mail_debug
                label: Mail Debug
                description: Enable or disable debugging for e-mail related functionality
                schema:
                  type: boolean
                  default: false
              - variable: database_schema
                label: Database Schema
                schema:
                  additional_attrs: true
                  type: dict
                  attrs:
                    - variable: run_main_migrations
                      label: Run Main Migrations
                      description: Whether to run main database migrations.
                      schema:
                        type: boolean
                        default: true
                    - variable: run_fixup_migrations
                      label: Run Fixup Migrations
                      description: Whether to run fixup database migrations.
                      schema:
                        type: boolean
                        default: true
                    - variable: repair_schema
                      label: Repair Schema
                      description: Use with care. This repairs all migrations in the database by updating their checksums and removing failed migrations.
                      schema:
                        type: boolean
                        default: false
              - variable: signup
                label: Signup
                schema:
                  additional_attrs: true
                  type: dict
                  attrs:
                    - variable: mode
                      label: Mode
                      description: The mode defines if new users can signup or not.
                      schema:
                        type: string
                        default: open
                        enum:
                          - value: open
                            description: open
                          - value: invite
                            description: invite
                          - value: closed
                            description: closed
                    - variable: invite_time
                      label: Invite Time
                      description: This is the period an invitation token is considered valid.
                      schema:
                        type: string
                        default: 3 days
  - variable: joex
    group: App Configuration
    label: Job Executor Configuration
    schema:
      additional_attrs: true
      type: dict
      attrs:
        - variable: database_schema
          label: Database Schema
          schema:
            additional_attrs: true
            type: dict
            attrs:
              - variable: run_main_migrations
                label: Run Main Migrations
                description: Whether to run main database migrations.
                schema:
                  type: boolean
                  default: true
              - variable: run_fixup_migrations
                label: Run Fixup Migrations
                description: Whether to run fixup database migrations.
                schema:
                  type: boolean
                  default: true
              - variable: repair_schema
                label: Repair Schema
                description: Use with care. This repairs all migrations in the database by updating their checksums and removing failed migrations.
                schema:
                  type: boolean
                  default: false
        - variable: mail_debug
          label: Mail Debug
          description: Enable or disable debugging for e-mail related functionality. This applies to both sending and receiving mails.
          schema:
            type: boolean
            default: false
        - variable: send_mail
          label: Send Mail
          schema:
            additional_attrs: true
            type: dict
            attrs:
              - variable: list_id
                label: List ID
                description: Enable or disable debugging for e-mail related functionality. This applies to both sending and receiving mails.
                schema:
                  type: string
                  default: ""
        - variable: scheduler
          label: Scheduler
          schema:
            additional_attrs: true
            type: dict
            attrs:
              - variable: pool_size
                label: Pool Size
                description: Number of processing allowed in parallel.
                schema:
                  type: int
                  default: 1
              - variable: counting_scheme
                label: Counting Scheme
                description: A counting scheme determines the ratio of how high and low priority jobs are run.
                schema:
                  type: string
                  default: 4,1
              - variable: retries
                label: Retries
                description: How many times a failed job should be retried until it enters failed state.
                schema:
                  type: int
                  default: 2
              - variable: retry_delay
                label: Retry Delay
                description: The delay until the next try is performed for a failed job.
                schema:
                  type: string
                  default: 1 minute
              - variable: log_buffer_size
                label: Log Buffer Size
                description: The queue size of log statements from a job.
                schema:
                  type: int
                  default: 500
              - variable: wakeup_period
                label: Wakeup Period
                description: If no job is left in the queue, the scheduler will wait until a notify is requested.
                schema:
                  type: string
                  default: 30 minutes
        - variable: periodic_scheduler
          label: Periodic Scheduler
          schema:
            additional_attrs: true
            type: dict
            attrs:
              - variable: wakeup_period
                label: Wakeup Period
                description: A fallback to start looking for due periodic tasks regularly.
                schema:
                  type: string
                  default: 10 minutes
        - variable: user_tasks
          label: User Tasks
          schema:
            additional_attrs: true
            type: dict
            attrs:
              - variable: scan_mailbox
                label: Scan Mailbox
                schema:
                  additional_attrs: true
                  type: dict
                  attrs:
                    - variable: max_folders
                      label: Max Folders
                      description: A limit of how many folders to scan through.
                      schema:
                        type: int
                        default: 50
                    - variable: mail_chunk_size
                      label: Mail Chunk Size
                      description: How many mails (headers only) to retrieve in one chunk.
                      schema:
                        type: int
                        default: 50
                    - variable: max_mails
                      label: Max Mails
                      description: A limit on how many mails to process in one job run.
                      schema:
                        type: int
                        default: 500
        - variable: house_keeping
          label: House Keeping
          schema:
            additional_attrs: true
            type: dict
            attrs:
              - variable: schedule
                label: Schedule
                description: When the house keeping tasks execute.
                schema:
                  type: string
                  default: Sun *-*-* 00:00:00 UTC
              - variable: cleanup_invites
                label: Cleanup Invites
                schema:
                  additional_attrs: true
                  type: dict
                  attrs:
                    - variable: enabled
                      label: Enable Invite Cleanup
                      schema:
                        type: boolean
                        default: true
                    - variable: older_than
                      label: Older Than
                      description: The minimum age of invites to be deleted.
                      schema:
                        type: string
                        default: 30 days
              - variable: cleanup_remember_me
                label: Cleanup Remember Me
                schema:
                  additional_attrs: true
                  type: dict
                  attrs:
                    - variable: enabled
                      label: Enable Remember Me Cleanup
                      schema:
                        type: boolean
                        default: true
                    - variable: older_than
                      label: Older Than
                      description: The minimum age of tokens to be deleted.
                      schema:
                        type: string
                        default: 30 days
              - variable: cleanup_jobs
                label: Cleanup Jobs
                schema:
                  additional_attrs: true
                  type: dict
                  attrs:
                    - variable: enabled
                      label: Enable Jobs Cleanup
                      schema:
                        type: boolean
                        default: true
                    - variable: older_than
                      label: Older Than
                      description: The minimum age of jobs to delete.
                      schema:
                        type: string
                        default: 30 days
                    - variable: delete_batch
                      label: Delete Batch
                      description: This defines how many jobs are deleted in one transaction.
                      schema:
                        type: int
                        default: 100
              - variable: cleanup_downloads
                label: Cleanup Downloads
                schema:
                  additional_attrs: true
                  type: dict
                  attrs:
                    - variable: enabled
                      label: Enable Downloads Cleanup
                      schema:
                        type: boolean
                        default: true
                    - variable: older_than
                      label: Older Than
                      description: The minimum age of a download file to be deleted.
                      schema:
                        type: string
                        default: 14 days
              - variable: check_nodes
                label: Check Nodes
                schema:
                  additional_attrs: true
                  type: dict
                  attrs:
                    - variable: enabled
                      label: Enable Check Nodes
                      schema:
                        type: boolean
                        default: true
                    - variable: min_not_found
                      label: Min Not Found
                      description: How often the node must be unreachable, before it is removed.
                      schema:
                        type: int
                        default: 2
              - variable: integrity_check
                label: Integrity Check
                schema:
                  additional_attrs: true
                  type: dict
                  attrs:
                    - variable: enabled
                      label: Enable Integrity Check
                      schema:
                        type: boolean
                        default: true
  - variable: TZ
    label: Timezone
    group: "General Settings"
    schema:
      type: string
      default: "Etc/UTC"
      $ref:
        - "definitions/timezone"
  - variable: envList
    label: Extra Environment Variables
    description: "Please be aware that some variables are set in the background, adding duplicates here might cause issues or prevent the app from starting..."
    group: "General Settings"
    schema:
      type: list
      default: []
      items:
        - variable: envItem
          label: Environment Variable
          schema:
            additional_attrs: true
            type: dict
            attrs:
              - variable: name
                label: Name
                schema:
                  type: string
              - variable: value
                label: Value
                schema:
                  type: string
  - variable: service
    group: Networking and Services
    label: Configure Service(s)
    schema:
      additional_attrs: true
      type: dict
      attrs:
        - variable: main
          label: Main Service
          description: The Primary service on which the healthcheck runs, often the webUI
          schema:
            additional_attrs: true
            type: dict
            attrs:
              - variable: enabled
                label: Enable the Service
                schema:
                  type: boolean
                  default: true
                  hidden: true
              - variable: type
                label: Service Type
                description: "ClusterIP's are only internally available and Loadbalancer exposes the service using the system loadbalancer"
                schema:
                  type: string
                  default: LoadBalancer
                  enum:
                    - value: LoadBalancer
                      description: LoadBalancer (Expose Ports)
                    - value: ClusterIP
                      description: ClusterIP (Do Not Expose Ports)
                    - value: Simple
                      description: Deprecated CHANGE THIS
              - variable: loadBalancerIP
                label: LoadBalancer IP
                description: "MetalLB Only: Selects the Loadbalancer IP to expose on. Required when using PortalButton with MetalLB"
                schema:
                  show_if: [["type", "=", "LoadBalancer"]]
                  type: string
                  default: ""
              - variable: ports
                label: "Service's Port(s) Configuration"
                schema:
                  additional_attrs: true
                  type: dict
                  attrs:
                    - variable: main
                      label: Main Service Port Configuration
                      schema:
                        additional_attrs: true
                        type: dict
                        attrs:
                          - variable: port
                            label: Port
                            description: This port exposes the container port on the service
                            schema:
                              type: int
                              default: 10320
                              required: true
        - variable: joex
          label: Joex Service
          description: Joex Service
          schema:
            additional_attrs: true
            type: dict
            attrs:
              - variable: enabled
                label: Enable the Service
                schema:
                  type: boolean
                  default: true
                  hidden: true
              - variable: type
                label: Service Type
                description: "ClusterIP's are only internally available and Loadbalancer exposes the service using the system loadbalancer"
                schema:
                  type: string
                  default: ClusterIP
                  enum:
                    - value: LoadBalancer
                      description: LoadBalancer (Expose Ports)
                    - value: ClusterIP
                      description: ClusterIP (Do Not Expose Ports)
                    - value: Simple
                      description: Deprecated CHANGE THIS
              - variable: loadBalancerIP
                label: LoadBalancer IP
                description: "MetalLB Only: Selects the Loadbalancer IP to expose on. Required when using PortalButton with MetalLB"
                schema:
                  show_if: [["type", "=", "LoadBalancer"]]
                  type: string
                  default: ""
              - variable: ports
                label: "Service's Port(s) Configuration"
                schema:
                  additional_attrs: true
                  type: dict
                  attrs:
                    - variable: joex
                      label: Joex Service Port Configuration
                      schema:
                        additional_attrs: true
                        type: dict
                        attrs:
                          - variable: port
                            label: Port
                            description: This port exposes the container port on the service
                            schema:
                              type: int
                              default: 10321
                              required: true
  - variable: serviceexpert
    group: Networking and Services
    label: Show Expert Config
    schema:
      type: boolean
      default: false
      show_subquestions_if: true
      subquestions:
        - variable: hostNetwork
          group: Networking and Services
          label: Host-Networking (Complicated)
          schema:
            type: boolean
            default: false
        - variable: externalInterfaces
          description: Add External Interfaces
          label: Add external Interfaces
          group: Networking
          schema:
            type: list
            items:
              - variable: interfaceConfiguration
                description: Interface Configuration
                label: Interface Configuration
                schema:
                  type: dict
                  $ref:
                    - "normalize/interfaceConfiguration"
                  attrs:
                    - variable: hostInterface
                      description: Please Specify Host Interface
                      label: Host Interface
                      schema:
                        type: string
                        required: true
                        $ref:
                          - "definitions/interface"
                    - variable: ipam
                      description: Define how IP Address will be managed
                      label: IP Address Management
                      schema:
                        type: dict
                        required: true
                        attrs:
                          - variable: type
                            description: Specify type for IPAM
                            label: IPAM Type
                            schema:
                              type: string
                              required: true
                              enum:
                                - value: dhcp
                                  description: Use DHCP
                                - value: static
                                  description: Use Static IP
                              show_subquestions_if: static
                              subquestions:
                                - variable: staticIPConfigurations
                                  label: Static IP Addresses
                                  schema:
                                    type: list
                                    items:
                                      - variable: staticIP
                                        label: Static IP
                                        schema:
                                          type: ipaddr
                                          cidr: true
                                - variable: staticRoutes
                                  label: Static Routes
                                  schema:
                                    type: list
                                    items:
                                      - variable: staticRouteConfiguration
                                        label: Static Route Configuration
                                        schema:
                                          additional_attrs: true
                                          type: dict
                                          attrs:
                                            - variable: destination
                                              label: Destination
                                              schema:
                                                type: ipaddr
                                                cidr: true
                                                required: true
                                            - variable: gateway
                                              label: Gateway
                                              schema:
                                                type: ipaddr
                                                cidr: false
                                                required: true
        - variable: serviceList
          label: Add Manual Custom Services
          group: Networking and Services
          schema:
            type: list
            default: []
            items:
              - variable: serviceListEntry
                label: Custom Service
                schema:
                  additional_attrs: true
                  type: dict
                  attrs:
                    - variable: enabled
                      label: Enable the service
                      schema:
                        type: boolean
                        default: true
                        hidden: true
                    - variable: name
                      label: Name
                      schema:
                        type: string
                        default: ""
                    - variable: type
                      label: Service Type
                      description: "ClusterIP's are only internally available and Loadbalancer exposes the service using the system loadbalancer"
                      schema:
                        type: string
                        default: LoadBalancer
                        enum:
                          - value: LoadBalancer
                            description: LoadBalancer (Expose Ports)
                          - value: ClusterIP
                            description: ClusterIP (Do Not Expose Ports)
                          - value: Simple
                            description: Deprecated CHANGE THIS
                    - variable: loadBalancerIP
                      label: LoadBalancer IP
                      description: "MetalLB Only: Selects the Loadbalancer IP to expose on. Required when using PortalButton with MetalLB"
                      schema:
                        show_if: [["type", "=", "LoadBalancer"]]
                        type: string
                        default: ""
                    - variable: advancedsvcset
                      label: Show Advanced Service Settings
                      schema:
                        type: boolean
                        default: false
                        show_subquestions_if: true
                        subquestions:
                          - variable: externalIPs
                            label: "External IP's"
                            description: "External IP's"
                            schema:
                              type: list
                              default: []
                              items:
                                - variable: externalIP
                                  label: External IP
                                  schema:
                                    type: string
                          - variable: ipFamilyPolicy
                            label: IP Family Policy
                            description: Specify the IP Policy
                            schema:
                              type: string
                              default: SingleStack
                              enum:
                                - value: SingleStack
                                  description: SingleStack
                                - value: PreferDualStack
                                  description: PreferDualStack
                                - value: RequireDualStack
                                  description: RequireDualStack
                          - variable: ipFamilies
                            label: IP Families
                            description: (Advanced) The IP Families that should be used
                            schema:
                              type: list
                              default: []
                              items:
                                - variable: ipFamily
                                  label: IP Family
                                  schema:
                                    type: string
                    - variable: portsList
                      label: Additional Service Ports
                      schema:
                        type: list
                        default: []
                        items:
                          - variable: portsListEntry
                            label: Custom ports
                            schema:
                              additional_attrs: true
                              type: dict
                              attrs:
                                - variable: enabled
                                  label: Enable the Port
                                  schema:
                                    type: boolean
                                    default: true
                                    hidden: true
                                - variable: name
                                  label: Port Name
                                  schema:
                                    type: string
                                    default: ""
                                - variable: protocol
                                  label: Port Type
                                  schema:
                                    type: string
                                    default: TCP
                                    enum:
                                      - value: HTTP
                                        description: HTTP
                                      - value: HTTPS
                                        description: HTTPS
                                      - value: TCP
                                        description: TCP
                                      - value: UDP
                                        description: UDP
                                - variable: targetPort
                                  label: Target Port
                                  description: This port exposes the container port on the service
                                  schema:
                                    type: int
                                    required: true
                                - variable: port
                                  label: Container Port
                                  schema:
                                    type: int
                                    required: true
        - variable: import
          label: Import Storage
          description: Mounted to DSC container at /import
          schema:
            additional_attrs: true
            type: dict
            attrs:
              - variable: type
                label: Type of Storage
                description: Sets the persistence type, Anything other than PVC could break rollback!
                schema:
                  type: string
                  default: pvc
                  enum:
                    - value: pvc
                      description: PVC
                    - value: hostPath
                      description: Host Path
                    - value: emptyDir
                      description: emptyDir
                    - value: nfs
                      description: NFS Share
              - variable: server
                label: NFS Server
                schema:
                  show_if: [["type", "=", "nfs"]]
                  type: string
                  default: ""
              - variable: path
                label: Path on NFS Server
                schema:
                  show_if: [["type", "=", "nfs"]]
                  type: string
                  default: ""
              - variable: setPermissions
                label: Automatic Permissions
                description: Automatically set permissions on install
                schema:
                  show_if: [["type", "=", "hostPath"]]
                  type: boolean
                  default: false
              - variable: readOnly
                label: Read Only
                schema:
                  type: boolean
                  default: false
              - variable: hostPath
                label: Host Path
                description: Path inside the container the storage is mounted
                schema:
                  show_if: [["type", "=", "hostPath"]]
                  type: hostpath
              - variable: medium
                label: EmptyDir Medium
                schema:
                  show_if: [["type", "=", "emptyDir"]]
                  type: string
                  default: ""
                  enum:
                    - value: ""
                      description: Default
                    - value: Memory
                      description: Memory
              - variable: size
                label: Size quotum of Storage (Do NOT REDUCE after installation)
                description: This value can ONLY be INCREASED after the installation
                schema:
                  show_if: [["type", "=", "pvc"]]
                  type: string
                  default: 256Gi
  - variable: persistenceList
    label: Additional App Storage
    group: Storage and Persistence
    schema:
      type: list
      default: []
      items:
        - variable: persistenceListEntry
          label: Custom Storage
          schema:
            additional_attrs: true
            type: dict
            attrs:
              - variable: enabled
                label: Enable the storage
                schema:
                  type: boolean
                  default: true
                  hidden: true
              - variable: type
                label: Type of Storage
                description: Sets the persistence type, Anything other than PVC could break rollback!
                schema:
                  type: string
                  default: hostPath
                  enum:
                    - value: pvc
                      description: PVC
                    - value: hostPath
                      description: Host Path
                    - value: emptyDir
                      description: emptyDir
                    - value: nfs
                      description: NFS Share
              - variable: server
                label: NFS Server
                schema:
                  show_if: [["type", "=", "nfs"]]
                  type: string
                  default: ""
              - variable: path
                label: Path on NFS Server
                schema:
                  show_if: [["type", "=", "nfs"]]
                  type: string
                  default: ""
              - variable: setPermissions
                label: Automatic Permissions
                description: Automatically set permissions on install
                schema:
                  show_if: [["type", "=", "hostPath"]]
                  type: boolean
                  default: false
              - variable: readOnly
                label: Read Only
                schema:
                  type: boolean
                  default: false
              - variable: hostPath
                label: Host Path
                description: Path inside the container the storage is mounted
                schema:
                  show_if: [["type", "=", "hostPath"]]
                  type: hostpath
              - variable: mountPath
                label: Mount Path
                description: Path inside the container the storage is mounted
                schema:
                  type: string
                  default: ""
                  required: true
                  valid_chars: '^\/([a-zA-Z0-9._-]+(\s?[a-zA-Z0-9._-]+|\/?))+$'
              - variable: medium
                label: EmptyDir Medium
                schema:
                  show_if: [["type", "=", "emptyDir"]]
                  type: string
                  default: ""
                  enum:
                    - value: ""
                      description: Default
                    - value: Memory
                      description: Memory
              - variable: size
                label: Size Quotum of Storage
                schema:
                  show_if: [["type", "=", "pvc"]]
                  type: string
                  default: 256Gi
  - variable: ingress
    label: ""
    group: Ingress
    schema:
      additional_attrs: true
      type: dict
      attrs:
        - variable: main
          label: Main Ingress
          schema:
            additional_attrs: true
            type: dict
            attrs:
              - variable: enabled
                label: Enable Ingress
                schema:
                  type: boolean
                  default: false
                  show_subquestions_if: true
                  subquestions:
                    - variable: hosts
                      label: Hosts
                      schema:
                        type: list
                        default: []
                        items:
                          - variable: hostEntry
                            label: Host
                            schema:
                              additional_attrs: true
                              type: dict
                              attrs:
                                - variable: host
                                  label: HostName
                                  schema:
                                    type: string
                                    default: ""
                                    required: true
                                - variable: paths
                                  label: Paths
                                  schema:
                                    type: list
                                    default: []
                                    items:
                                      - variable: pathEntry
                                        label: Host
                                        schema:
                                          additional_attrs: true
                                          type: dict
                                          attrs:
                                            - variable: path
                                              label: Path
                                              schema:
                                                type: string
                                                required: true
                                                default: "/"
                                            - variable: pathType
                                              label: Path Type
                                              schema:
                                                type: string
                                                required: true
                                                default: Prefix
                    - variable: clusterIssuer
                      label: clusterIssuer
                      description: 'add the name of your cert-manager clusterIssuer here for automatic tls certificates. Cannot be used combined with tls option below'
                      schema:
                        type: string
                        default: ""
                    - variable: tls
                      label: TLS-Settings
                      schema:
                        type: list
                        show_if: [["clusterIssuer", "=", ""]]
                        default: []
                        items:
                          - variable: tlsEntry
                            label: Host
                            schema:
                              additional_attrs: true
                              type: dict
                              attrs:
                                - variable: hosts
                                  label: Certificate Hosts
                                  schema:
                                    type: list
                                    default: []
                                    items:
                                      - variable: host
                                        label: Host
                                        schema:
                                          type: string
                                          default: ""
                                          required: true

                                - variable: clusterIssuer
                                  label: Use Cert-Manager clusterIssuer
                                  description: 'add the name of your cert-manager clusterIssuer here for automatic tls certificates.'
                                  schema:
                                    type: string
                                    default: ""
                                - variable: scaleCert
                                  label: Use TrueNAS SCALE Certificate (Deprecated)
                                  schema:
                                    show_if: [["clusterIssuer", "=", ""]]
                                    type: int
                                    $ref:
                                      - "definitions/certificate"
                                - variable: secretName
                                  label: Use Custom Secret (Advanced)
                                  schema:
                                    show_if: [["clusterIssuer", "=", ""]]
                                    type: string
                                    default: ""
                    - variable: entrypoint
                      label: (Advanced) Traefik Entrypoint
                      description: Entrypoint used by Traefik when using Traefik as Ingress Provider
                      schema:
                        type: string
                        default: websecure
                        required: true
                    - variable: ingressClassName
                      label: (Advanced/Optional) IngressClass Name
                      schema:
                        type: string
                        default: ""
                    - variable: middlewares
                      label: Traefik Middlewares
                      description: Add previously created Traefik Middlewares to this Ingress
                      schema:
                        type: list
                        default: []
                        items:
                          - variable: name
                            label: Name
                            schema:
                              type: string
                              default: ""
                              required: true
  - variable: ingressList
    label: Add Manual Custom Ingresses
    group: Ingress
    schema:
      type: list
      default: []
      items:
        - variable: ingressListEntry
          label: Custom Ingress
          schema:
            additional_attrs: true
            type: dict
            attrs:
              - variable: enabled
                label: Enable Ingress
                schema:
                  type: boolean
                  default: true
                  hidden: true
              - variable: name
                label: Name
                schema:
                  type: string
                  default: ""
              - variable: ingressClassName
                label: IngressClass Name
                schema:
                  type: string
                  default: ""
              - variable: hosts
                label: Hosts
                schema:
                  type: list
                  default: []
                  items:
                    - variable: hostEntry
                      label: Host
                      schema:
                        additional_attrs: true
                        type: dict
                        attrs:
                          - variable: host
                            label: HostName
                            schema:
                              type: string
                              default: ""
                              required: true
                          - variable: paths
                            label: Paths
                            schema:
                              type: list
                              default: []
                              items:
                                - variable: pathEntry
                                  label: Host
                                  schema:
                                    additional_attrs: true
                                    type: dict
                                    attrs:
                                      - variable: path
                                        label: Path
                                        schema:
                                          type: string
                                          required: true
                                          default: "/"
                                      - variable: pathType
                                        label: Path Type
                                        schema:
                                          type: string
                                          required: true
                                          default: Prefix
                                      - variable: service
                                        label: Linked Service
                                        schema:
                                          additional_attrs: true
                                          type: dict
                                          attrs:
                                            - variable: name
                                              label: Service Name
                                              schema:
                                                type: string
                                                default: ""
                                            - variable: port
                                              label: Service Port
                                              schema:
                                                type: int
              - variable: clusterIssuer
                label: clusterIssuer
                description: 'add the name of your cert-manager clusterIssuer here for automatic tls certificates. Cannot be used combined with tls option below'
                schema:
                  type: string
                  default: ""
              - variable: tls
                label: TLS-Settings
                schema:
                  type: list
                  default: []
                  show_if: [["clusterIssuer", "=", ""]]
                  items:
                    - variable: tlsEntry
                      label: Host
                      schema:
                        additional_attrs: true
                        type: dict
                        attrs:
                          - variable: hosts
                            label: Certificate Hosts
                            schema:
                              type: list
                              default: []
                              items:
                                - variable: host
                                  label: Host
                                  schema:
                                    type: string
                                    default: ""
                                    required: true
                          - variable: clusterIssuer
                            label: Use Cert-Manager clusterIssuer
                            description: 'add the name of your Cert-Manager clusterIssuer here for automatic tls certificates.'
                            schema:
                              type: string
                              default: ""
                          - variable: scaleCert
                            label: Use TrueNAS SCALE Certificate (Deprecated)
                            schema:
                              show_if: [["clusterIssuer", "=", ""]]
                              type: int
                              $ref:
                                - "definitions/certificate"
                          - variable: secretName
                            label: Use Custom Secret (Advanced)
                            schema:
                              type: string
                              show_if: [["clusterIssuer", "=", ""]]
                              default: ""
              - variable: entrypoint
                label: Traefik Entrypoint
                description: Entrypoint used by Traefik when using Traefik as Ingress Provider
                schema:
                  type: string
                  default: websecure
                  required: true
              - variable: middlewares
                label: Traefik Middlewares
                description: Add previously created Traefik Middlewares to this Ingress
                schema:
                  type: list
                  default: []
                  items:
                    - variable: name
                      label: Name
                      schema:
                        type: string
                        default: ""
                        required: true
  - variable: security
    label: Container Security Settings
    group: Security and Permissions
    schema:
      type: dict
      additional_attrs: true
      attrs:
        - variable: editsecurity
          label: Change PUID / UMASK values
          description: By enabling this you override default set values.
          schema:
            type: boolean
            default: false
            show_subquestions_if: true
            subquestions:
              - variable: PUID
                label: Process User ID - PUID
                description: When supported by the container, this sets the User ID running the Application Process. Not supported by all Apps
                schema:
                  type: int
                  default: 568
              - variable: UMASK
                label: UMASK
                description: When supported by the container, this sets the UMASK for the App. Not supported by all Apps
                schema:
                  type: string
                  default: "002"
  - variable: advancedSecurity
    label: Show Advanced Security Settings
    group: Security and Permissions
    schema:
      type: boolean
      default: false
      show_subquestions_if: true
      subquestions:
        - variable: securityContext
          label: Security Context
          schema:
            additional_attrs: true
            type: dict
            attrs:
              - variable: privileged
                label: Privileged mode
                schema:
                  type: boolean
                  default: false
              - variable: readOnlyRootFilesystem
                label: ReadOnly Root Filesystem
                schema:
                  type: boolean
                  default: false
              - variable: allowPrivilegeEscalation
                label: Allow Privilege Escalation
                schema:
                  type: boolean
                  default: false
              - variable: runAsNonRoot
                label: runAsNonRoot
                schema:
                  type: boolean
                  default: false
  - variable: podSecurityContext
    group: Security and Permissions
    label: Pod Security Context
    schema:
      additional_attrs: true
      type: dict
      attrs:
        - variable: runAsUser
          label: runAsUser
          description: The UserID of the user running the application
          schema:
            type: int
            default: 0
        - variable: runAsGroup
          label: runAsGroup
          description: The groupID this App of the user running the application
          schema:
            type: int
            default: 0
        - variable: fsGroup
          label: fsGroup
          description: The group that should own ALL storage.
          schema:
            type: int
            default: 568
        - variable: fsGroupChangePolicy
          label: "When should we take ownership?"
          schema:
            type: string
            default: OnRootMismatch
            enum:
              - value: OnRootMismatch
                description: OnRootMismatch
              - value: Always
                description: Always
        - variable: supplementalGroups
          label: Supplemental Groups
          schema:
            type: list
            default: []
            items:
              - variable: supplementalGroupsEntry
                label: Supplemental Group
                schema:
                  type: int
  - variable: resources
    group: Resources and Devices
    label: "Resource Limits"
    schema:
      additional_attrs: true
      type: dict
      attrs:
        - variable: limits
          label: Advanced Limit Resource Consumption
          schema:
            additional_attrs: true
            type: dict
            attrs:
              - variable: cpu
                label: CPU
                description: "1000m means 1 hyperthread. Detailed info: https://truecharts.org/docs/manual/SCALE%20Apps/indepth/validation"
                schema:
                  type: string
                  default: 4000m
                  valid_chars: '^(?!^0(\.0|m|)$)([0-9]+)(\.[0-9]|m?)$'
              - variable: memory
                label: RAM
                description: "1Gi means 1 Gibibyte RAM. Detailed info: https://truecharts.org/docs/manual/SCALE%20Apps/indepth/validation"
                schema:
                  type: string
                  default: 8Gi
                  valid_chars: '^(?!^0(e[0-9]|[EPTGMK]i?|)$)([0-9]+)(|[EPTGMK]i?|e[0-9]+)$'
        - variable: requests
          label: "Minimum Resources Required (request)"
          schema:
            additional_attrs: true
            type: dict
            hidden: true
            attrs:
              - variable: cpu
                label: CPU
                description: "1000m means 1 hyperthread. Detailed info: https://truecharts.org/docs/manual/SCALE%20Apps/indepth/validation"
                schema:
                  type: string
                  default: 10m
                  hidden: true
                  valid_chars: '^(?!^0(\.0|m|)$)([0-9]+)(\.[0-9]|m?)$'
              - variable: memory
                label: "RAM"
                description: "1Gi means 1 Gibibyte RAM. Detailed info: https://truecharts.org/docs/manual/SCALE%20Apps/indepth/validation"
                schema:
                  type: string
                  default: 50Mi
                  hidden: true
                  valid_chars: '^(?!^0(e[0-9]|[EPTGMK]i?|)$)([0-9]+)(|[EPTGMK]i?|e[0-9]+)$'
  - variable: deviceList
    label: Mount USB Devices
    group: Resources and Devices
    schema:
      type: list
      default: []
      items:
        - variable: deviceListEntry
          label: Device
          schema:
            additional_attrs: true
            type: dict
            attrs:
              - variable: enabled
                label: Enable the Storage
                schema:
                  type: boolean
                  default: true
              - variable: type
                label: (Advanced) Type of Storage
                description: Sets the persistence type
                schema:
                  type: string
                  default: hostPath
                  hidden: true
              - variable: readOnly
                label: readOnly
                schema:
                  type: boolean
                  default: false
              - variable: hostPath
                label: Host Device Path
                description: Path to the device on the host system
                schema:
                  type: path
              - variable: mountPath
                label: Container Device Path
                description: Path inside the container the device is mounted
                schema:
                  type: string
                  default: "/dev/ttyACM0"
  # Specify GPU configuration
  - variable: scaleGPU
    label: GPU Configuration
    group: Resources and Devices
    schema:
      type: dict
      $ref:
        - "definitions/gpuConfiguration"
      attrs: []
#  - variable: horizontalPodAutoscaler
#    group: Advanced
#    label: (Advanced) Horizontal Pod Autoscaler
#    schema:
#      type: list
#      default: []
#      items:
#      - variable: hpaEntry
#        label: HPA Entry
#        schema:
#          additional_attrs: true
#          type: dict
#          attrs:
#            - variable: name
#              label: Name
#              schema:
#                type: string
#                required: true
#                default: ""
#            - variable: enabled
#              label: Enabled
#              schema:
#                type: boolean
#                default: false
#                show_subquestions_if: true
#                subquestions:
#                  - variable: target
#                    label: Target
#                    description: Deployment name, Defaults to Main Deployment
#                    schema:
#                      type: string
#                      default: ""
#                  - variable: minReplicas
#                    label: Minimum Replicas
#                    schema:
#                      type: int
#                      default: 1
#                  - variable: maxReplicas
#                    label: Maximum Replicas
#                    schema:
#                      type: int
#                      default: 5
#                  - variable: targetCPUUtilizationPercentage
#                    label: Target CPU Utilization Percentage
#                    schema:
#                      type: int
#                      default: 80
#                  - variable: targetMemoryUtilizationPercentage
#                    label: Target Memory Utilization Percentage
#                    schema:
#                      type: int
#                      default: 80
  - variable: networkPolicy
    group: Advanced
    label: (Advanced) Network Policy
    schema:
      type: list
      default: []
      items:
      - variable: netPolicyEntry
        label: Network Policy Entry
        schema:
          additional_attrs: true
          type: dict
          attrs:
            - variable: name
              label: Name
              schema:
                type: string
                required: true
                default: ""
            - variable: enabled
              label: Enabled
              schema:
                type: boolean
                default: false
                show_subquestions_if: true
                subquestions:
                  - variable: policyType
                    label: Policy Type
                    schema:
                      type: string
                      default: ""
                      enum:
                        - value: ""
                          description: Default
                        - value: ingress
                          description: Ingress
                        - value: egress
                          description: Egress
                        - value: ingress-egress
                          description: Ingress and Egress
                  - variable: egress
                    label: Egress
                    schema:
                      type: list
                      default: []
                      items:
                        - variable: egressEntry
                          label: ""
                          schema:
                            additional_attrs: true
                            type: dict
                            attrs:
                              - variable: to
                                label: To
                                schema:
                                  type: list
                                  default: []
                                  items:
                                    - variable: toEntry
                                      label: ""
                                      schema:
                                        additional_attrs: true
                                        type: dict
                                        attrs:
                                          - variable: ipBlock
                                            label: IP Block
                                            schema:
                                              additional_attrs: true
                                              type: dict
                                              attrs:
                                                - variable: cidr
                                                  label: CIDR
                                                  schema:
                                                    type: string
                                                    default: ""
                                                - variable: except
                                                  label: Except
                                                  schema:
                                                    type: list
                                                    default: []
                                                    items:
                                                      - variable: exceptint
                                                        label: ""
                                                        schema:
                                                          type: string
                                          - variable: namespaceSelector
                                            label: Namespace Selector
                                            schema:
                                              additional_attrs: true
                                              type: dict
                                              attrs:
                                                - variable: matchExpressions
                                                  label: Match Expressions
                                                  schema:
                                                    type: list
                                                    default: []
                                                    items:
                                                      - variable: expressionEntry
                                                        label: ""
                                                        schema:
                                                          additional_attrs: true
                                                          type: dict
                                                          attrs:
                                                            - variable: key
                                                              label: Key
                                                              schema:
                                                                type: string
                                                            - variable: operator
                                                              label: Operator
                                                              schema:
                                                                type: string
                                                                default: TCP
                                                                enum:
                                                                  - value: In
                                                                    description: In
                                                                  - value: NotIn
                                                                    description: NotIn
                                                                  - value: Exists
                                                                    description: Exists
                                                                  - value: DoesNotExist
                                                                    description: DoesNotExist
                                                            - variable: values
                                                              label: Values
                                                              schema:
                                                                type: list
                                                                default: []
                                                                items:
                                                                  - variable: value
                                                                    label: ""
                                                                    schema:
                                                                      type: string
                                          - variable: podSelector
                                            label: ""
                                            schema:
                                              additional_attrs: true
                                              type: dict
                                              attrs:
                                                - variable: matchExpressions
                                                  label: Match Expressions
                                                  schema:
                                                    type: list
                                                    default: []
                                                    items:
                                                      - variable: expressionEntry
                                                        label: ""
                                                        schema:
                                                          additional_attrs: true
                                                          type: dict
                                                          attrs:
                                                            - variable: key
                                                              label: Key
                                                              schema:
                                                                type: string
                                                            - variable: operator
                                                              label: Operator
                                                              schema:
                                                                type: string
                                                                default: TCP
                                                                enum:
                                                                  - value: In
                                                                    description: In
                                                                  - value: NotIn
                                                                    description: NotIn
                                                                  - value: Exists
                                                                    description: Exists
                                                                  - value: DoesNotExist
                                                                    description: DoesNotExist
                                                            - variable: values
                                                              label: Values
                                                              schema:
                                                                type: list
                                                                default: []
                                                                items:
                                                                  - variable: value
                                                                    label: ""
                                                                    schema:
                                                                      type: string
                              - variable: ports
                                label: Ports
                                schema:
                                  type: list
                                  default: []
                                  items:
                                    - variable: portsEntry
                                      label: ""
                                      schema:
                                        additional_attrs: true
                                        type: dict
                                        attrs:
                                          - variable: port
                                            label: Port
                                            schema:
                                              type: int
                                          - variable: endPort
                                            label: End Port
                                            schema:
                                              type: int
                                          - variable: protocol
                                            label: Protocol
                                            schema:
                                              type: string
                                              default: TCP
                                              enum:
                                                - value: TCP
                                                  description: TCP
                                                - value: UDP
                                                  description: UDP
                                                - value: SCTP
                                                  description: SCTP
                  - variable: ingress
                    label: Ingress
                    schema:
                      type: list
                      default: []
                      items:
                        - variable: ingressEntry
                          label: ""
                          schema:
                            additional_attrs: true
                            type: dict
                            attrs:
                              - variable: from
                                label: From
                                schema:
                                  type: list
                                  default: []
                                  items:
                                    - variable: fromEntry
                                      label: ""
                                      schema:
                                        additional_attrs: true
                                        type: dict
                                        attrs:
                                          - variable: ipBlock
                                            label: IP Block
                                            schema:
                                              additional_attrs: true
                                              type: dict
                                              attrs:
                                                - variable: cidr
                                                  label: CIDR
                                                  schema:
                                                    type: string
                                                    default: ""
                                                - variable: except
                                                  label: Except
                                                  schema:
                                                    type: list
                                                    default: []
                                                    items:
                                                      - variable: exceptint
                                                        label: ""
                                                        schema:
                                                          type: string
                                          - variable: namespaceSelector
                                            label: Namespace Selector
                                            schema:
                                              additional_attrs: true
                                              type: dict
                                              attrs:
                                                - variable: matchExpressions
                                                  label: Match Expressions
                                                  schema:
                                                    type: list
                                                    default: []
                                                    items:
                                                      - variable: expressionEntry
                                                        label: ""
                                                        schema:
                                                          additional_attrs: true
                                                          type: dict
                                                          attrs:
                                                            - variable: key
                                                              label: Key
                                                              schema:
                                                                type: string
                                                            - variable: operator
                                                              label: Operator
                                                              schema:
                                                                type: string
                                                                default: TCP
                                                                enum:
                                                                  - value: In
                                                                    description: In
                                                                  - value: NotIn
                                                                    description: NotIn
                                                                  - value: Exists
                                                                    description: Exists
                                                                  - value: DoesNotExist
                                                                    description: DoesNotExist
                                                            - variable: values
                                                              label: Values
                                                              schema:
                                                                type: list
                                                                default: []
                                                                items:
                                                                  - variable: value
                                                                    label: ""
                                                                    schema:
                                                                      type: string
                                          - variable: podSelector
                                            label: ""
                                            schema:
                                              additional_attrs: true
                                              type: dict
                                              attrs:
                                                - variable: matchExpressions
                                                  label: Match Expressions
                                                  schema:
                                                    type: list
                                                    default: []
                                                    items:
                                                      - variable: expressionEntry
                                                        label: ""
                                                        schema:
                                                          additional_attrs: true
                                                          type: dict
                                                          attrs:
                                                            - variable: key
                                                              label: Key
                                                              schema:
                                                                type: string
                                                            - variable: operator
                                                              label: Operator
                                                              schema:
                                                                type: string
                                                                default: TCP
                                                                enum:
                                                                  - value: In
                                                                    description: In
                                                                  - value: NotIn
                                                                    description: NotIn
                                                                  - value: Exists
                                                                    description: Exists
                                                                  - value: DoesNotExist
                                                                    description: DoesNotExist
                                                            - variable: values
                                                              label: Values
                                                              schema:
                                                                type: list
                                                                default: []
                                                                items:
                                                                  - variable: value
                                                                    label: ""
                                                                    schema:
                                                                      type: string
                              - variable: ports
                                label: Ports
                                schema:
                                  type: list
                                  default: []
                                  items:
                                    - variable: portsEntry
                                      label: ""
                                      schema:
                                        additional_attrs: true
                                        type: dict
                                        attrs:
                                          - variable: port
                                            label: Port
                                            schema:
                                              type: int
                                          - variable: endPort
                                            label: End Port
                                            schema:
                                              type: int
                                          - variable: protocol
                                            label: Protocol
                                            schema:
                                              type: string
                                              default: TCP
                                              enum:
                                                - value: TCP
                                                  description: TCP
                                                - value: UDP
                                                  description: UDP
                                                - value: SCTP
                                                  description: SCTP
  - variable: addons
    group: Addons
    label: ""
    schema:
      additional_attrs: true
      type: dict
      attrs:
        - variable: codeserver
          label: Codeserver
          schema:
            additional_attrs: true
            type: dict
            attrs:
              - variable: enabled
                label: Enabled
                schema:
                  type: boolean
                  default: false
                  show_subquestions_if: true
                  subquestions:
                    - variable: git
                      label: Git Settings
                      schema:
                        additional_attrs: true
                        type: dict
                        attrs:
                          - variable: deployKey
                            description: Raw SSH Private Key
                            label: Deploy Key
                            schema:
                              type: string
                          - variable: deployKeyBase64
                            description: Base64-encoded SSH private key. When both variables are set, the raw SSH key takes precedence
                            label: Deploy Key Base64
                            schema:
                              type: string
                    - variable: service
                      label: ""
                      schema:
                        additional_attrs: true
                        type: dict
                        attrs:
                          - variable: type
                            label: Service Type
                            description: "ClusterIP's are only internally available and Loadbalancer exposes the service using the system loadbalancer"
                            schema:
                              type: string
                              default: LoadBalancer
                              enum:
                                - value: NodePort
                                  description: Deprecated CHANGE THIS
                                - value: ClusterIP
                                  description: ClusterIP
                                - value: LoadBalancer
                                  description: LoadBalancer
                          - variable: loadBalancerIP
                            label: LoadBalancer IP
                            description: "MetalLB Only: Selects the Loadbalancer IP to expose on. Required when using PortalButton with MetalLB"
                            schema:
                              show_if: [["type", "=", "LoadBalancer"]]
                              type: string
                              default: ""
                          - variable: advancedsvcset
                            label: Show Advanced Service Settings
                            schema:
                              type: boolean
                              default: false
                              show_subquestions_if: true
                              subquestions:
                                - variable: externalIPs
                                  label: "External IP's"
                                  description: "External IP's"
                                  schema:
                                    type: list
                                    default: []
                                    items:
                                      - variable: externalIP
                                        label: External IP
                                        schema:
                                          type: string
                                - variable: ipFamilyPolicy
                                  label: IP Family Policy
                                  description: Specify the IP Policy
                                  schema:
                                    type: string
                                    default: SingleStack
                                    enum:
                                      - value: SingleStack
                                        description: SingleStack
                                      - value: PreferDualStack
                                        description: PreferDualStack
                                      - value: RequireDualStack
                                        description: RequireDualStack
                                - variable: ipFamilies
                                  label: IP Families
                                  description: (Advanced) The IP Families that should be used
                                  schema:
                                    type: list
                                    default: []
                                    items:
                                      - variable: ipFamily
                                        label: IP Family
                                        schema:
                                          type: string
                          - variable: ports
                            label: ""
                            schema:
                              additional_attrs: true
                              type: dict
                              attrs:
                                - variable: codeserver
                                  label: ""
                                  schema:
                                    additional_attrs: true
                                    type: dict
                                    attrs:
                                      - variable: port
                                        label: Port
                                        schema:
                                          type: int
                                          default: 36107
                                      - variable: nodePort
                                        description: Leave Empty to Disable
                                        label: nodePort DEPRECATED
                                        schema:
                                          type: int
                                          default: 36107
                    - variable: envList
                      label: Codeserver Environment Variables
                      schema:
                        type: list
                        show_if: [["type", "!=", "disabled"]]
                        default: []
                        items:
                          - variable: envItem
                            label: Environment Variable
                            schema:
                              additional_attrs: true
                              type: dict
                              attrs:
                                - variable: name
                                  label: Name
                                  schema:
                                    type: string
                                    required: true
                                - variable: value
                                  label: Value
                                  schema:
                                    type: string
                                    required: true
        - variable: vpn
          label: VPN
          schema:
            additional_attrs: true
            type: dict
            attrs:
              - variable: type
                label: Type
                schema:
                  type: string
                  default: disabled
                  enum:
                    - value: disabled
                      description: disabled
                    - value: openvpn
                      description: OpenVPN
                    - value: wireguard
                      description: Wireguard
                    - value: tailscale
                      description: Tailscale
              - variable: openvpn
                label: OpenVPN Settings
                schema:
                  type: dict
                  show_if: [["type", "=", "openvpn"]]
                  attrs:
                    - variable: username
                      label: Authentication Username (Optional)
                      description: Authentication Username, Optional
                      schema:
                        type: string
                        default: ""
                    - variable: password
                      label: Authentication Password
                      description: Authentication Credentials
                      schema:
                        type: string
                        default: ""
                        required: true
              - variable: tailscale
                label: Tailscale Settings
                schema:
                  type: dict
                  show_if: [["type", "=", "tailscale"]]
                  attrs:
                    - variable: authkey
                      label: Authentication Key
                      description: Provide an auth key to automatically authenticate the node as your user account.
                      schema:
                        type: string
                        private: true
                        default: ""
                    - variable: auth_once
                      label: Auth Once
                      description: Only attempt to log in if not already logged in.
                      schema:
                        type: boolean
                        default: true
                    - variable: accept_dns
                      label: Accept DNS
                      description: Accept DNS configuration from the admin console.
                      schema:
                        type: boolean
                        default: false
                    - variable: userspace
                      label: Userspace
                      description: Userspace Networking mode allows running Tailscale where you do not have access to create a VPN tunnel device.
                      schema:
                        type: boolean
                        default: false
                    - variable: routes
                      label: Routes
                      description: Expose physical subnet routes to your entire Tailscale network.
                      schema:
                        type: string
                        default: ""
                    - variable: dest_ip
                      label: Destination IP
                      description: Tells the DNAT mechanism which Destination IP to set in the IP header, and where to send packets that are matched.
                      schema:
                        type: string
                        default: ""
                    - variable: sock5_server
                      label: Sock5 Server
                      description: The address on which to listen for SOCKS5 proxying into the tailscale net.
                      schema:
                        type: string
                        default: ""
                    - variable: outbound_http_proxy_listen
                      label: Outbound HTTP Proxy Listen
                      description: The address on which to listen for HTTP proxying into the tailscale net.
                      schema:
                        type: string
                        default: ""
                    - variable: extra_args
                      label: Extra Args
                      description: Extra Args
                      schema:
                        type: string
                        default: ""
                    - variable: daemon_extra_args
                      label: Tailscale Daemon Extra Args
                      description: Tailscale Daemon Extra Args
                      schema:
                        type: string
                        default: ""
              - variable: killSwitch
                label: Enable Killswitch
                schema:
                  type: boolean
                  show_if: [["type", "!=", "disabled"]]
                  default: true
              - variable: excludedNetworks_IPv4
                label: Killswitch Excluded IPv4 networks
                description: List of Killswitch Excluded IPv4 Addresses
                schema:
                  type: list
                  show_if: [["type", "!=", "disabled"]]
                  default: []
                  items:
                    - variable: networkv4
                      label: IPv4 Network
                      schema:
                        type: string
                        required: true
              - variable: excludedNetworks_IPv6
                label: Killswitch Excluded IPv6 networks
                description: "List of Killswitch Excluded IPv6 Addresses"
                schema:
                  type: list
                  show_if: [["type", "!=", "disabled"]]
                  default: []
                  items:
                    - variable: networkv6
                      label: IPv6 Network
                      schema:
                        type: string
                        required: true
              - variable: configFile
                label: VPN Config File Location
                schema:
                  type: dict
                  show_if: [["type", "!=", "disabled"]]
                  attrs:
                    - variable: enabled
                      label: Enabled
                      schema:
                        type: boolean
                        default: true
                        hidden: true
                    - variable: type
                      label: Type
                      schema:
                        type: string
                        default: hostPath
                        hidden: true
                    - variable: hostPathType
                      label: hostPathType
                      schema:
                        type: string
                        default: File
                        hidden: true
                    - variable: noMount
                      label: noMount
                      schema:
                        type: boolean
                        default: true
                        hidden: true
                    - variable: hostPath
                      label: Full Path to File
                      description: "Path to your local VPN config file for example: /mnt/tank/vpn.conf or /mnt/tank/vpn.ovpn"
                      schema:
                        type: string
                        default: ""
              - variable: envList
                label: VPN Environment Variables
                schema:
                  type: list
                  show_if: [["type", "!=", "disabled"]]
                  default: []
                  items:
                    - variable: envItem
                      label: Environment Variable
                      schema:
                        additional_attrs: true
                        type: dict
                        attrs:
                          - variable: name
                            label: Name
                            schema:
                              type: string
                              required: true
                          - variable: value
                            label: Value
                            schema:
                              type: string
                              required: true
  - variable: docs
    group: Documentation
    label: Please read the documentation at https://truecharts.org
    description: Please read the documentation at
      <br /><a href="https://truecharts.org">https://truecharts.org</a>
    schema:
      additional_attrs: true
      type: dict
      attrs:
        - variable: confirmDocs
          label: I have checked the documentation
          schema:
            type: boolean
            default: true
  - variable: donateNag
    group: Documentation
    label: Please consider supporting TrueCharts, see https://truecharts.org/sponsor
    description: Please consider supporting TrueCharts, see
      <br /><a href="https://truecharts.org/sponsor">https://truecharts.org/sponsor</a>
    schema:
      additional_attrs: true
      type: dict
      attrs:
        - variable: confirmDonate
          label: I have considered donating
          schema:
            type: boolean
            default: true
            hidden: true
